#include "TString.h"
#include "TFile.h"
#include "TTree.h"

#include <vector>

#include "SigRegionBinning.h"

using namespace SigRegionBinning;

void makeSigRegionPredictionsFromTree(TTree *tree, std::vector<float >& predictions, BinningRegion reg) {
  std::vector<region> regs = getSigRegions(reg);
  
  for(int i=0;i<regs.size();i++) {
    predictions.push_back( tree->GetEntries( Form( "MR>=%f && MR<%f && t1Rsq>=%f && t1Rsq<%f",
						  regs.at(i).MR_min,
						  regs.at(i).MR_max,
						  regs.at(i).Rsq_min,
						  regs.at(i).Rsq_max )
					    )
			  );

  }

}

void printSigRegionPredictionsFromTree(TTree *tree, BinningRegion reg,float norm) {
  std::vector<float > predictions;
  std::vector<region> regs = getSigRegions(reg);
  makeSigRegionPredictionsFromTree(tree,predictions, reg);
  for(int i=0;i<regs.size();i++) {
    std::cout << regs.at(i).MR_min << " - " << regs.at(i).MR_max << "    "
	      << regs.at(i).Rsq_min << " - " << regs.at(i).Rsq_max << "    "
	      << predictions.at(i)*norm << std::endl;
  }
}
